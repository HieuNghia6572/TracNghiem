<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml"
      xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" th:href="@{/css/giaodienthi.css}">
    <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.1/css/jquery.dataTables.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>
    <title>Hi·ªÉn Th·ªã ƒê·ªÅ Thi</title>
    <script>
        function startCountdown(duration) {
            console.log("B·∫Øt ƒë·∫ßu ƒë·∫øm ng∆∞·ª£c v·ªõi th·ªùi gian:", duration); // Log th·ªùi gian b·∫Øt ƒë·∫ßu
            let timer = duration * 60;  // Chuy·ªÉn ƒë·ªïi ph√∫t th√†nh gi√¢y
            let interval = setInterval(function () {
                let minutes = Math.floor(timer / 60);
                let seconds = timer % 60;
                document.getElementById("countdown").innerHTML = minutes + " ph√∫t " + seconds + " gi√¢y";

                if (--timer < 0) {
                    clearInterval(interval);
                    document.getElementById("countdown").innerHTML = "ƒê√£ h·∫øt th·ªùi gian!";

                    // Th·ª±c hi·ªán l∆∞u ti·∫øn tr√¨nh tr∆∞·ªõc khi n·ªôp b√†i
                    saveProgress();

                    // Sau khi l∆∞u ti·∫øn tr√¨nh, th·ª±c hi·ªán n·ªôp b√†i
                    submitTest();
                }
            }, 1000);
        }

        function saveProgress() {
            console.log("L∆∞u ti·∫øn tr√¨nh...");
            // G·ªçi h√†nh ƒë·ªông l∆∞u ti·∫øn tr√¨nh, c√≥ th·ªÉ l√† submit form ho·∫∑c g·ªçi API
            // N·∫øu c√≥ n√∫t l∆∞u, t·ª± ƒë·ªông nh·∫•n v√†o n√∫t n√†y:
            document.getElementById("saveBtn").click();
        }

        function submitTest() {
            console.log("N·ªôp b√†i...");
            // Sau khi l∆∞u ti·∫øn tr√¨nh, n·ªôp b√†i
            document.getElementById("submitBtn").click();
        }

        window.onload = function () {
            let thoiLuong = [[${minutesLeft}]]; // Gi√° tr·ªã t·ª´ server
            console.log("Th·ªùi gian c√≤n l·∫°i (ph√∫t):", thoiLuong); // Log gi√° tr·ªã minutesLeft
            startCountdown(thoiLuong);
        };
    </script>
    <style>
        body {
            padding:0px;
        }
        header {
            background-color: #0d6efd; /* M√†u n·ªÅn header */
            color: #fff;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* ƒê·ªï b√≥ng cho header */
        }
        .section-title {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5rem;
            color: #343a40; /* M√†u ch·ªØ */
        }
        .search-container {
            margin-bottom: 20px;
            display: flex;
            justify-content: center; /* CƒÉn gi·ªØa */
            gap: 10px; /* Kho·∫£ng c√°ch gi·ªØa c√°c ph·∫ßn t·ª≠ */
        }
        .custom-input, .custom-select {
            border: 2px solid #0d6efd; /* M√†u vi·ªÅn */
            border-radius: 10px; /* Bo tr√≤n c√°c g√≥c */
            padding: 10px; /* Kho·∫£ng c√°ch b√™n trong */
        }
        .table {
            background-color: #fff; /* M√†u n·ªÅn b·∫£ng */
            border-radius: 10px; /* Bo tr√≤n c√°c g√≥c c·ªßa b·∫£ng */
            overflow: hidden; /* ·∫®n ph·∫ßn vi·ªÅn b·∫£ng */
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1); /* ƒê·ªï b√≥ng */
        }
        .table th {
            background-color: #0d6efd; /* N·ªÅn cho ti√™u ƒë·ªÅ b·∫£ng */
            color: #fff; /* M√†u ch·ªØ ti√™u ƒë·ªÅ */
        }
        .text-ellipsis {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 150px;
        }
        .nav {
            list-style: none; /* X√≥a d·∫•u ch·∫•m */
            padding: 0;
            margin: 0;
        }
        .nav-item {
            margin-left: 20px; /* Kho·∫£ng c√°ch gi·ªØa c√°c item */
        }
        .nav-link {
            text-decoration: none; /* X√≥a g·∫°ch ch√¢n */
            transition: color 0.3s; /* Hi·ªáu ·ª©ng chuy·ªÉn m√†u */
        }
        .nav-link:hover {
            color: #ffcc00; /* M√†u khi hover */
        }
        .py-0 {
            padding-top:0px;
            padding-bottom:opx;"
        }
        @keyframes blink {
            0% {
                background-color: #ffffff; /* M√†u n·ªÅn ban ƒë·∫ßu (tr·∫Øng) */
            }
            50% {
                background-color: #00BFFF; /* M√†u n·ªÅn gi·ªØa (xanh d∆∞∆°ng nh·∫°t) */
            }
            100% {
                background-color: #ffffff; /* Tr·ªü l·∫°i m√†u n·ªÅn ban ƒë·∫ßu (tr·∫Øng) */
            }
        }

        header {
            animation: blink 5s infinite; /* √Åp d·ª•ng animation l·∫•p l√°nh */
        }

        .nav-link {
            color: #000; /* M√†u ch·ªØ ban ƒë·∫ßu */
            transition: color 0.5s ease;
        }

        header:hover .nav-link {
            color: #000080; /* M√†u ch·ªØ khi hover (xanh ƒë·∫≠m) */
        }
        .li-container {
            display: flex; /* S·ª≠ d·ª•ng Flexbox ƒë·ªÉ chia th√†nh hai ph·∫ßn */
            justify-content: space-between; /* CƒÉn gi·ªØa c√°c ph·∫ßn t·ª≠ */
            align-items: center; /* CƒÉn gi·ªØa theo chi·ªÅu d·ªçc */
            opacity: 1;
            transition: opacity 0.3s ease;
        }
        .li-container.dimmed {
            opacity: 0.1;
        }
        .toggle-btn {
            margin: 20px;
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 10px; /* Bo g√≥c */
            background-color: #ffffe0; /* M√†u n·ªÅn v√†ng nh·∫°t */
            color: #000; /* M√†u ch·ªØ ƒëen */
            border: 2px solid #000; /* Vi·ªÅn m√†u ƒëen */
            transition: background-color 0.3s; /* Hi·ªáu ·ª©ng chuy·ªÉn m√†u khi hover */
        }

        .toggle-btn:hover {
            background-color: #ffeeba; /* M√†u n·ªÅn khi hover (n√¢u nh·∫°t) */
        }

        .part1 {
            flex: 1; /* Chi·∫øm kh√¥ng gian c√≤n l·∫°i */
            /* Th√™m c√°c thu·ªôc t√≠nh kh√°c n·∫øu c·∫ßn */
        }

        .part2 {
            flex: 1; /* Chi·∫øm kh√¥ng gian c√≤n l·∫°i */
            /* Th√™m c√°c thu·ªôc t√≠nh kh√°c n·∫øu c·∫ßn */
        }
        .duongke {
            height: 4px; /* ƒê·ªô d√†y c·ªßa ƒë∆∞·ªùng k·∫ª */
            background-color: #000; /* M√†u ƒëen cho ƒë∆∞·ªùng k·∫ª */
            margin: 20px 0; /* Kho·∫£ng c√°ch tr√™n v√† d∆∞·ªõi ƒë∆∞·ªùng k·∫ª */
        }
        .save-progress {
            background-color: green; /* M√†u xanh l√° c√¢y */
            color: white; /* M√†u ch·ªØ tr·∫Øng */
            border: none; /* Kh√¥ng vi·ªÅn */
            border-radius: 5px; /* Bo tr√≤n g√≥c */
            padding: 10px 20px; /* Padding: 10px cho tr√™n/d∆∞·ªõi, 20px cho tr√°i/ph·∫£i */
            font-size: 16px; /* K√≠ch th∆∞·ªõc ch·ªØ */
            cursor: pointer; /* Con tr·ªè chu·ªôt thay ƒë·ªïi khi hover */
            transition: background-color 0.3s; /* Hi·ªáu ·ª©ng chuy·ªÉn m√†u */
            margin-top: 10px; /* Kho·∫£ng c√°ch 10px ph√≠a tr√™n n√∫t */
        }

        .save-progress:hover {
            background-color: darkgreen; /* M√†u khi hover */
        }
        .view-results {
            background-color: blue; /* M√†u xanh l√° c√¢y */
            color: white; /* M√†u ch·ªØ tr·∫Øng */
            border: none; /* Kh√¥ng vi·ªÅn */
            border-radius: 5px; /* Bo tr√≤n g√≥c */
            padding: 10px 20px; /* Padding: 10px cho tr√™n/d∆∞·ªõi, 20px cho tr√°i/ph·∫£i */
            font-size: 16px; /* K√≠ch th∆∞·ªõc ch·ªØ */
            cursor: pointer; /* Con tr·ªè chu·ªôt thay ƒë·ªïi khi hover */
            transition: background-color 0.3s; /* Hi·ªáu ·ª©ng chuy·ªÉn m√†u */
            margin-top: 10px; /* Kho·∫£ng c√°ch 10px ph√≠a tr√™n n√∫t */
            margin-bottom: 10px;
        }

        .view-results:hover {
            background-color: darkblue; /* M√†u khi hover */
        }

    </style>
    <style>
        .floating-buttons {
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #ffffff; /* M√†u n·ªÅn c·ªßa khung */
            border: 1px solid #ccc; /* ƒê∆∞·ªùng vi·ªÅn */
            border-radius: 5px; /* Bo g√≥c */
            padding: 10px; /* Kho·∫£ng c√°ch b√™n trong */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); /* ƒê·ªï b√≥ng */
        }

        .floating-buttons button {
            margin: 5px 0; /* Kho·∫£ng c√°ch gi·ªØa c√°c n√∫t */
            width: 100%; /* Chi·ªÅu r·ªông n√∫t */
        }
    </style>
    <title>Giao di·ªán thi</title>
</head>
<body>

<header>
    <div class="container">
        <div class="d-flex justify-content-between align-items-center py-0">
            <div class="logo d-flex align-items-center" style="white-space: nowrap;">
<!--                <img th:src="@{/img/logo_khongnen.png}" alt="" height="100" width="180">-->
                <img th:src="@{/test/gif_logo.gif}" alt="GIF" height="110" width="180" style="max-width: 100%; height: auto; border-radius: 15px;">
                <p class="text-black mb-0 link-hover" style="color:black; margin-left: 50px;"> <!-- Th√™m margin-left 50px -->
                    <strong>
                        Xin ch√†o: <span sec:authentication="name"></span>
                        ƒë·∫øn v·ªõi b√†i thi <span th:text="${'m√¥n ' + thongtinde.monthi.tenmonthi}"></span>
                        v·ªõi <span th:text="${'m√£ ƒë·ªÅ ' + thongtinde.madethi}"></span>
                    </strong>
                </p>
                <div class="ml-3" style="color:black; margin-left: 100px !important ;font-weight: bold;">
                    <p class="mb-0">| Th·ªùi gian hi·ªán t·∫°i: <span id="time"></span> |</p>
<!--                    <p class="mb-0">| Th·ªùi gian thi c√≤n: <span id="countdown"></span> |</p>-->
                </div>
            </div>
        </div>
    </div>
</header>

<div class="content" id="content">
    <div class="row" style="margin-right: 0px !important">
        <div class="col-2" style="background-color: #f8f9fa; position: relative; padding: 20px;">
            <div class="floating-buttons" style="background-color: #f8f9fa; position: fixed; width: 15%;">
                <div class="chuy" style="color:red;font-size: 20px;font-weight: bold;">CH√ö √ù</div>
                <table>
                    <tbody>
                    <tr th:each="thongbao : ${thongbaos}">
                        <td th:utext="${thongbao.message}"></td>
                    </tr>
                    </tbody>
                </table>
                <button class="toggle-btn">B·∫≠t/T·∫Øt l√†m m·ªù</button>
            </div>
        </div>
        <div class="col-8">
            <h1 style="text-align: center" th:text="${'M√£ ƒë·ªÅ: '+thongtinde.madethi}"></h1>
            <h1 style="text-align: center" th:text="${'T√™n m√¥n thi: '+thongtinde.monthi.tenmonthi}"></h1>
            <form id="quiz-form" method="post" action="/submitQuiz">
                <input type="hidden" name="deThiId" th:value="${thongtinde.id}"/>

                <input type="hidden" name="cathiId" th:value="${caThi.id}">

                <input type="hidden" id="userId" th:value="${userId}" />
                <!-- G√°n gi√° tr·ªã cho deThiId -->
                <ul class="quiz">
                    <li th:each="baithi, stat : ${chiTietDeThiList}" class="li-container">
            <span class="part1">
                <div class="questionz-container">
                    <div class="duongke"></div>
                    <h4 th:utext="${'C√¢u h·ªèi ' + (stat.index + 1) + ': ' + (baithi.cauHoi.ten != null ? baithi.cauHoi.ten : '')}"></h4>
                </div>

<!--                <span class="image-part" th:if="${baithi.cauHoi != null and baithi.cauHoi.ImgUrl != null and baithi.cauHoi.ImgUrl != ''}" style="margin-left: 100px !important">-->
<!--                    <img th:src="${baithi.cauHoi.ImgUrl}" alt="H√¨nh ·∫£nh c√¢u h·ªèi" height="110" width="110" />-->
<!--                </span>-->

                <div  th:if="${baithi.cauHoi != null and baithi.cauHoi.imgUrl != null and baithi.cauHoi.imgUrl != '' and baithi.cauHoi.imgUrl != 'Ch∆∞a c√≥ ·∫£nh'}">
                    <img style="margin-left: 100px;margin-bottom:20px !important" th:src="${baithi.cauHoi.imgUrl}" alt="H√¨nh ·∫£nh c√¢u h·ªèi" height="140" width="140" />
                </div>

                <ul class="choices" style="margin-left: 50px !important">
                    <li>
                        <label class="choice-label">
                            <input type="radio" th:name="${'question_' + baithi.id}" th:value="'A'" th:checked="${baithi.dapanchon == 'A'}" />
                            <span th:text="${'A.  ' + (baithi.cauHoi.dapanA != null ? baithi.cauHoi.dapanA : '')}"></span>
                        </label>
                    </li>
                    <li>
                        <label class="choice-label">
                            <input type="radio" th:name="${'question_' + baithi.id}" th:value="'B'" th:checked="${baithi.dapanchon == 'B'}" />
                            <span th:text="${'B.  ' + (baithi.cauHoi.dapanB != null ? baithi.cauHoi.dapanB : '')}"></span>
                        </label>
                    </li>
                    <li>
                        <label class="choice-label">
                            <input type="radio" th:name="${'question_' + baithi.id}" th:value="'C'" th:checked="${baithi.dapanchon == 'C'}" />
                            <span th:text="${'C.  ' + (baithi.cauHoi.dapanC != null ? baithi.cauHoi.dapanC : '')}"></span>
                        </label>
                    </li>
                    <li>
                        <label class="choice-label">
                            <input type="radio" th:name="${'question_' + baithi.id}" th:value="'D'" th:checked="${baithi.dapanchon == 'D'}" />
                            <span th:text="${'D.  ' + (baithi.cauHoi.dapanD != null ? baithi.cauHoi.dapanD : '')}"></span>
                        </label>
                    </li>
                </ul>
            </span>
                    </li>
                </ul>
<!--                <button type="submit" class="save-progress" id="saveBtn">L∆∞u ti·∫øn tr√¨nh</button>-->
<!--                <button type="button" class="save-progress" id="saveBtn" onclick="saveProgress()">L∆∞u ti·∫øn tr√¨nh</button>-->
            </form>
<!--            <button type="button" class="view-results" id="submitBtn" onclick="viewKetQuaThi()">N·ªôp B√†i</button>-->
        </div>
        <div class="col-2" style="background-color:#f8f9fa" >
            <div class="floating-buttons" style="background-color: #f8f9fa; position: fixed; right: 40px; top: 80%; transform: translateY(-50%);">
                <p class="mb-0" style="font-weight: bold;">Th·ªùi gian thi c√≤n: </p>
                <a id="countdown" style="color: red;font-weight: bold;"></a>
                <button type="button" class="save-progress" id="saveBtn" onclick="saveProgress()">L∆∞u ti·∫øn tr√¨nh</button>
                <button type="button" class="view-results" id="submitBtn" onclick="viewKetQuaThi()">N·ªôp B√†i</button>
            </div>
        </div>
    </div>
</div>

<footer class="bg-primary text-white text-center" style="padding:20px">
    <div class="container d-flex" style="margin: 0px;">
        <!-- C·ªôt 1: H√¨nh ·∫£nh -->
        <div class="footer-image" style="flex: 0 0 20%; max-width: 20%;">
            <img th:src="@{/test/gif_logo.gif}" alt="GIF" height="110" width="180" style="max-width: 100%; height: auto; border-radius: 15px;">
            <img th:src="@{/img/gvhs.png}" alt="" height="130" width="130">
        </div>

        <!-- C·ªôt 2: N·ªôi dung Tr·∫Øc nghi·ªám NTT -->
        <div class="footer-left" style="flex: 0 0 25%; max-width: 25%; text-align: center;">
            <h4 class="mb-0" style="text-align: center;">Tr·∫Øc nghi·ªám NTT</h4>
            <br>
            <p class="mb-0" style="line-height: 2.3;">N·ªÅn t·∫£ng thi tr·∫Øc nghi·ªám online</p>
            <p class="mb-0" style="line-height: 2.3;"> ƒë√°ng tin c·∫≠y</p>
            <p class="mb-0" style="line-height: 2.3;">¬© Website 2024 .</p>
        </div>

        <!-- C·ªôt gi·ªØa: Th√¥ng tin th√™m -->
        <div class="footer-middle" style="flex: 0 0 25%; max-width: 25%; text-align: left;margin-left: 100px;">
            <h4 class="mb-0">T√†i nguy√™n:</h4>
            <br>
            <p class="mb-0" style="line-height: 2.3;">‚û¢ H∆∞·ªõng d·∫´n chi ti·∫øt </p>
            <p class="mb-0" style="line-height: 2.3;">‚û¢ Gi·ªõi thi·ªáu </p>
            <p class="mb-0" style="line-height: 2.3;">‚û¢ Th√¥ng tin ng∆∞·ªùi d√πng</p>

        </div>

        <!-- C·ªôt 3: Th√¥ng tin li√™n h·ªá -->
        <div class="footer-content" style="flex: 0 0 30%; max-width: 30%; text-align: left; margin-left: 200px;">
            <h4 class="mb-0">Th√¥ng tin li√™n h·ªá:</h4>
            <br>
            <p class="mb-0" style="line-height: 2.3;">üåê Li√™n h·ªá: phanhieunghia1054@gmail.com</p>
            <p class="mb-0" style="line-height: 2.3;">‚òé S·ªë ƒëi·ªán tho·∫°i: 090525xxx</p>
            <p class="mb-0" style="line-height: 2.3;">üè° ƒê·ªãa ch·ªâ: 9, Nguy·ªÖn Th·ªã Minh Khai, Ph∆∞·ªùng B·∫øn Ngh√©, Qu·∫≠n 1, H·ªì Ch√≠ Minh</p>
        </div>
    </div>
</footer>
<script>
    function fetchTime() {
        fetch('/time')
            .then(response => response.text())
            .then(data => {
                document.getElementById('time').innerText = data;
            });
    }

    // G·ªçi h√†m fetchTime ƒë·ªÉ c·∫≠p nh·∫≠t th·ªùi gian ngay khi t·∫£i trang
    fetchTime();
    setInterval(fetchTime, 1000); // C·∫≠p nh·∫≠t m·ªói gi√¢y
</script>
<script src="js/scripts.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    function saveProgress() {
    var formData = {};
    $('#quiz-form input[type="radio"]:checked').each(function() {
        var questionId = $(this).attr('name').split('_')[1]; // L·∫•y ID c√¢u h·ªèi
        var selectedValue = $(this).val(); // Gi√° tr·ªã ƒë√£ ch·ªçn
        formData['question_' + questionId] = selectedValue; // L∆∞u v√†o formData
    });

    // G·ª≠i d·ªØ li·ªáu ƒë·∫øn server
    $.ajax({
        url: '/submitQuiz', // ƒê·ªãa ch·ªâ endpoint ƒë·ªÉ l∆∞u d·ªØ li·ªáu
        type: 'POST',
        data: {
            deThiId: $('input[name="deThiId"]').val(), // G·ª≠i deThiId
            cathiId: $('input[name="cathiId"]').val(), // ID ca thi
            ...formData // G·ª≠i t·∫•t c·∫£ c√°c c√¢u tr·∫£ l·ªùi
        },
        success: function(response) {
            alert('L∆∞u ti·∫øn tr√¨nh th√†nh c√¥ng!');
        },
        error: function(xhr, status, error) {
            alert('C√≥ l·ªói x·∫£y ra: ' + error);
        }
    });
}
</script>
<!--<script>-->
<!--    function viewKetQuaThi() {-->
<!--       var userId = document.getElementById('userId').value; // L·∫•y gi√° tr·ªã userId-->
<!--       var deThiId = $('input[name="deThiId"]').val(); // L·∫•y gi√° tr·ªã deThiId-->
<!--       window.location.href = "/ketquathi/" + userId + "/" + deThiId;-->
<!--   }-->
<!--</script>-->
<!--<script>-->
<!--    function viewKetQuaThi() {-->
<!--       // G·ªçi h√†m l∆∞u ti·∫øn tr√¨nh-->
<!--       saveProgress();-->

<!--       // L·∫•y gi√° tr·ªã userId v√† deThiId-->
<!--       var userId = document.getElementById('userId').value; // L·∫•y gi√° tr·ªã userId-->
<!--       var deThiId = $('input[name="deThiId"]').val(); // L·∫•y gi√° tr·ªã deThiId-->

<!--       // ƒê·∫∑t ƒë·ªô tr·ªÖ 2 gi√¢y tr∆∞·ªõc khi chuy·ªÉn h∆∞·ªõng-->
<!--       setTimeout(function() {-->
<!--           window.location.href = "/ketquathi/" + userId + "/" + deThiId;-->
<!--       }, 2000); // 2000 milliseconds = 2 seconds-->
<!--   }-->
<!--</script>-->
<script>
    function viewKetQuaThi() {
     // Hi·ªÉn th·ªã h·ªôp tho·∫°i x√°c nh·∫≠n
     if (confirm('B·∫°n c√≥ mu·ªën n·ªôp b√†i?')) {
         // N·∫øu ng∆∞·ªùi d√πng ch·ªçn OK, l∆∞u ti·∫øn tr√¨nh tr∆∞·ªõc khi n·ªôp b√†i
         saveProgress();

         // L·∫•y gi√° tr·ªã userId v√† deThiId
         var userId = document.getElementById('userId').value; // L·∫•y gi√° tr·ªã userId
         var deThiId = $('input[name="deThiId"]').val(); // L·∫•y gi√° tr·ªã deThiId

         // ƒê·∫∑t ƒë·ªô tr·ªÖ 2 gi√¢y tr∆∞·ªõc khi chuy·ªÉn h∆∞·ªõng
         setTimeout(function() {
             window.location.href = "/ketquathi/" + userId + "/" + deThiId;
         }, 2000); // 2000 milliseconds = 2 seconds
     } else {
         // N·∫øu ng∆∞·ªùi d√πng ch·ªçn Cancel, kh√¥ng l√†m g√¨
         return;
     }
 }
</script>
<script>
    // Gi·∫£ s·ª≠ b·∫°n ƒë√£ l∆∞u userId hi·ªán t·∫°i trong sessionStorage
    var currentUserId = sessionStorage.getItem('currentUserId');

    function resetRadioButtons() {
        // L·∫∑p qua t·∫•t c·∫£ c√°c input radio v√† reset
        $('input[type="radio"]').prop('checked', false);
    }

    $(document).ready(function() {
    var userId = document.getElementById('userId').value; // L·∫•y gi√° tr·ªã userId m·ªõi

    // Ki·ªÉm tra xem userId c√≥ kh√°c v·ªõi currentUserId kh√¥ng
    if (currentUserId !== userId) {
        // N·∫øu kh√°c, reset radio buttons v√† l∆∞u userId m·ªõi
        resetRadioButtons();
        sessionStorage.setItem('currentUserId', userId); // C·∫≠p nh·∫≠t userId m·ªõi
    }
});
</script>
<script>
    const listItems = document.querySelectorAll('.li-container');
    let dimmingEnabled = true; // Bi·∫øn ki·ªÉm so√°t t√≠nh nƒÉng l√†m m·ªù

    // H√†m ƒë·ªÉ l√†m m·ªù c√°c ph·∫ßn t·ª≠
    function dimItems() {
        if (dimmingEnabled) {
            listItems.forEach(item => {
                item.classList.add('dimmed');
            });
        }
    }

    // H√†m ƒë·ªÉ b·∫≠t/t·∫Øt t√≠nh nƒÉng l√†m m·ªù
    document.querySelector('.toggle-btn').addEventListener('click', () => {
        dimmingEnabled = !dimmingEnabled;
        if (dimmingEnabled) {
            dimItems(); // L√†m m·ªù n·∫øu ƒëang b·∫≠t
        } else {
            listItems.forEach(item => {
                item.classList.remove('dimmed'); // B·ªè l√†m m·ªù
            });
        }
    });

    // S·ª± ki·ªán khi di chu·ªôt v√†o/ra
    listItems.forEach(item => {
        item.addEventListener('mouseenter', () => {
            if (dimmingEnabled) {
                item.classList.remove('dimmed');
            }
        });
        item.addEventListener('mouseleave', () => {
            if (dimmingEnabled) {
                item.classList.add('dimmed');
            }
        });
    });

    // Kh·ªüi t·∫°o l√†m m·ªù ban ƒë·∫ßu
    dimItems();
</script>
<!--toi day-->
</body>
</html>